<div class="wrapper" (document:keydown.space)="gameService.pass()">
  <se-controls side="top" [attr.data-collapsed]="collapsed">
    <div  class="controls__menu-container">
      <se-logo></se-logo>
      <button class="button  controls__menu" (click)="toggleMenu()">
        <se-cell class="cell  cell--icon" seed="r"></se-cell>
      </button>
    </div>
    <div class="controls__anchor">
      <div class="controls__section">
        <se-actions [lord]="gameService.lord$ | async" (selection)="toggleMenu()"></se-actions>
        <se-support (selection)="toggleMenu()"></se-support>
      </div>
    </div>
  </se-controls>
  <div class="board-container">
    <main
      (mouseleave)="currentRegion = undefined"
      class="board" [seGrid]="dimension()" sePinchAndZoom>
      <se-cell [seRegion]="region"
               [sustenance]="region.sustenance"
               [color]="gameService.lordAt(region).color"
               [i]="i"
               (press)="gameService.settle(region)"
               (tap)="action(region)"
               (mouseenter)="actionEnter(region, $event)"
               (contextmenu)="$event.preventDefault()"
               [impregnable]="region.impregnable"
               class="cell" *ngFor="let region of game.board.regions; let i = index"
               [seed]="game.board.world[i]"></se-cell>
    </main>
    <div class="background">
      <se-cell *ngFor="let seed of backSeeds" [seed]="seed"></se-cell>
    </div>
  </div>
  <se-controls side="bottom">
    <se-lord-statistics style="flex-grow: 0" [lord]="game.lords[0]"></se-lord-statistics>
    <se-region-statistics style="flex-grow: 1" [lord]="gameService.lord$ | async" [region]="currentRegion"></se-region-statistics>
    <se-lord-statistics style="flex-grow: 0" [lord]="game.lords[1]" side="right"></se-lord-statistics>
  </se-controls>
</div>
